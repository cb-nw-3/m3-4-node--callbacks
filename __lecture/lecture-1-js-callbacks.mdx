# 3.1.0 - JS Topic: Callbacks

---

## Synchronous vs. Asynchronous

---

_Synchronous_: Things happens one at a time.

---

_Asynchronous_: Multiple things happen at the same time.

---

### Example

An app that fetches 2 resources from the network, and then combines the results into a final (needed) result.

---

<img src='./assets/async_sync.png' style='width: 100%;' />

---

### Important Distinction

In a _synchronous_ model, waiting for actions to finish is **implicit**, but in an _asynchronous_ model, it is **explicit**.

---

Synchronous === implicit control

Asynchronous === explicit control

---

Both of the important JavaScript programming platforms
—browsers and Node.js—
make operations that might take a while **asynchronous**.

_Examples of operations that might take time?_

---

## Callbacks

What is a callback?

//it is a function that wont be called by the programmer.like an event listener, the function in the listener is called by the action, not the programmer.

---

- A callback is a function that is to be executed, or _called_ after another function has finished executing.

- Any functions that is passed as an argument to another function is a callback function.

---

```js
console.log('do first thing');
console.log('do second thing');
console.log('do third thing');

// expected output

```

_What is expected here?_

---

What happens if the second thing takes longer than expected?

---

```js
console.log('do first thing');
setTimeout(function() {
    console.log('do second thing');
}, 2000);
console.log('do third thing');
```
Output:

//do first thing
//do third thing
//do second thing
---

### Important

JavaScript _did_ execute the functions in the right order,
but it **didn't wait for an answer (response)** before moving on to the next function to execute. 

---

## Example

```js
function writeStory(topic) {
    alert(`Begin writing a story about ${topic}`);
}

writeStory('traveling to Mars');
```

---

```js
function writeStory(topic, callback) {
    alert(`Begin writing a story about ${topic}`);
    callback();
}

writeStory('traveling to Mars', function() {
    alert('Done! Time to submit it.');
});
```
first alert: Begin writing a story about traveling to Mars
second alert: Done ! Time to submit it

the second alert pops immidietly after the first one.
---

Have we used callbacks in any of our code to date?

---

<img src='https://media2.giphy.com/media/nFjDu1LjEADh6/giphy.gif' />

_Examples?_

---

## Callback Hell... or the Pyramid of Doom.

Let's say we have a function that will notify the world of a message after an action is complete.

```js
function tellWorld(message, callback) {
    console.log(message);
    callback();
};
```

---

Sooo.... Is a callback _synchronous_ or _asynchronous_?

both, it depends on how you use it. In a forEach, it's synchronous for example.
---

Well that depends...

- `setTimeout`, `setInterval`, requests, and events are asynchronous.
- most other callbacks are synchronous.

---



<!-- [next](../lecture-0-our-progress) -->

EXPRESS METHODS:

    You can use form METHODS
    You can use method = "GET" in a form and POST
    GET is used to retrive information and the info is used in URL. Not secure
    POST, additional data is sent with the request
    PATCH (edit something)
    PUT (remplace one thing with anoter)
    DELETE (remove an existing thing)

    ^^ these are all semantic, they have the same behaviour as GET but inform us on what they do


    <form method='POST' action='/login'> //cause you create a new session
    <form method='DELETE' action='/logout'> //cause you delete the session


[More on Express routing](https://expressjs.com/en/guide/routing.html)
